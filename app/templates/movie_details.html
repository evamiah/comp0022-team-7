{% extends 'base.html' %}

{% block title %}Movie Details{% endblock %}

{% block content %}
    {% if not movie['invalid'] %}
        <div class="content">
            <div class="container mt-5 mb-5">
                <div class="row gx-5 gy-5">
                    <div class="col-md-4"><!--filters-->
                        <div class="card">
                                <div class="card-body">
                                    <img src="{{ movie['poster'] }}" class="card-img-top" alt="...">
                                </div> <!-- card-body.// -->
                            
                        </div><!-- card -->
                    </div><!-- filters -->
                    <div class="col-md-8"> <!--Movie Panel-->
                        <div class="card h-100">
                                <div class="card-body p-5">
                                    <h2 class="card-title">{{ movie['title'] }} ({{ movie['year'] }})</h2>
                                        <p class="card-text">Directed by: 
                                        {% for name in movie['director'] %}
                                            {% if ((movie['director']).index(name)) > 0 %}
                                            , {{ name }} 
                                            {% else %}
                                            {{ name }}
                                            {% endif %}
                                        {% endfor %}</p>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <p class="fw-bold">Tomatometer: {{ movie['tomatometer'] }}</p>
                                            </div>
                                            <div class="col-md-4">
                                                <p class="fw-bold">Audience Score: {{ movie['audience_score'] }}</p>
                                            </div>
                                        </div>
                                        
                                        <p class="card-text">{{ movie['overview'] }}</p>

                                    <h4>Lead Cast</h4>
                                        <ul>
                                            {% for name in movie['cast'] %}
                                            <li>{{ name }}</li>
                                            {% endfor %}
                                        </ul>
                                    <p class="card-text">Genre: {{ movie['genre'] }}</p>
                                    <p class="card-text"></p>Average Rating: {{ movie['user_rating'] }}</p>
                                    <p class="card-text"></p>Predicted Rating: {{ movie['predicted_rating'] }}</p>

                                    <a class="btn btn-primary" href="/movies/{{ movie_id }}/stats/low/{{ genre_id }}/low" role="button">Go To Stats</a>
                                        

                                </div> <!-- card-body.// -->
                            
                        </div><!-- card -->

                    </div> <!-- movie panel -->
                </div>
            </div> <!-- Container-->
        </div>

    {% else %}
        <div class="content">
            <div class="container mt-5 mb-5">
                        <div class="card">
                                <div class="card-body">
                                    <h1>{{ movie['info'] }}</h1>
                                </div> <!-- card-body.// -->
                            
                        </div><!-- card -->
            </div> <!-- Container-->
        </div>
    {% endif %}
{% endblock %}