<!DOCTYPE html>
<head>
    <title>Movie</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    {% if not movie['invalid'] %}
        <div class="content">
            <div class="container mt-5 mb-5">
                <div class="row gx-5 gy-5">
                    <div class="col-md-4"><!--filters-->
                        <div class="card">
                                <div class="card-body">
                                    <img src="{{ movie['poster'] }}" class="card-img-top" alt="...">
                                </div> <!-- card-body.// -->
                            
                        </div><!-- card -->
                    </div><!-- filters -->
                    <div class="col-md-8"> <!--Movie Panel-->
                        <div class="card h-100">
                                <div class="card-body p-5">
                                    <h2 class="card-title">{{ movie['title'] }} ({{ movie['year'] }})</h2>
                                    <p class="card-text">Genre: {{ movie['genre'] }}</p>
                                    <p class="card-text"></p>Average Rating: {{ movie['user_rating'] }}</p>
                                    <p class="card-text"></p>Predicted Rating: {{ movie['predicted_rating'] }}</p>
                                    <p>DEBUG STATS {{ stats_data }}</p>

                                    <p>Users who tend to rate movies low: {{ stats_data['users']['low'] }}</p>
                                    <p>Users who tend to rate movies high: {{ stats_data['users']['high'] }}</p>
                                    {% for genre, value in stats_data['genres'].items() %}
                                        <p>Users who tend to rate {{ genre }} movies low: {{ value['low'] }}</p>
                                        <p>Users who tend to rate {{ genre }} movies high: {{ value['high'] }}</p>
                                    {% endfor %}
                                    
                                    
                                        

                                </div> <!-- card-body.// -->
                            
                        </div><!-- card -->

                    </div> <!-- movie panel -->
                </div>
            </div> <!-- Container-->
        </div>

    {% else %}
        <div class="content">
            <div class="container mt-5 mb-5">
                        <div class="card">
                                <div class="card-body">
                                    <h1>{{ movie['info'] }}</h1>
                                </div> <!-- card-body.// -->
                            
                        </div><!-- card -->
            </div> <!-- Container-->
        </div>
    {% endif %}

    
</body>